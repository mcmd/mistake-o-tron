!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).bundle=e()}}((function(){return function e(t,n,r){function o(a,u){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!u&&c)return c(a,!0);if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return o(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){
/* @license
 * Copyright (c) 2016, Jeff Hlywa (jhlywa@gmail.com)
 * Released under the BSD license
 * https://github.com/jhlywa/chess.js/blob/master/LICENSE
 */
var r=function(e){var t="b",n="w",r=-1,o="p",i="n",a="b",u="r",c="q",s="k",l="pnbrqkPNBRQK",f="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",d=["1-0","0-1","1/2-1/2","*"],p={b:[16,32,17,15],w:[-16,-32,-17,-15]},v={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},h=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],b=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],g={p:0,n:1,b:2,r:3,q:4,k:5},m={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},y={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},w=7,O=6,j=1,k=0,P={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},C={w:[{square:P.a1,flag:y.QSIDE_CASTLE},{square:P.h1,flag:y.KSIDE_CASTLE}],b:[{square:P.a8,flag:y.QSIDE_CASTLE},{square:P.h8,flag:y.KSIDE_CASTLE}]},E=new Array(128),_={w:r,b:r},A=n,x={w:0,b:0},S=r,M=0,T=1,L=[],N={};function I(){E=new Array(128),_={w:r,b:r},A=n,x={w:0,b:0},S=r,M=0,T=1,L=[],N={},U(K())}function D(){R(f)}function R(e){var o=e.split(/\s+/),i=o[0],a=0;if(!q(e).valid)return!1;I();for(var u=0;u<i.length;u++){var c=i.charAt(u);if("/"===c)a+=8;else if(-1!=="0123456789".indexOf(c))a+=parseInt(c,10);else{var s=c<"a"?n:t;Q({type:c.toLowerCase(),color:s},ae(a)),a++}}return A=o[1],o[2].indexOf("K")>-1&&(x.w|=y.KSIDE_CASTLE),o[2].indexOf("Q")>-1&&(x.w|=y.QSIDE_CASTLE),o[2].indexOf("k")>-1&&(x.b|=y.KSIDE_CASTLE),o[2].indexOf("q")>-1&&(x.b|=y.QSIDE_CASTLE),S="-"===o[3]?r:P[o[3]],M=parseInt(o[4],10),T=parseInt(o[5],10),U(K()),!0}function q(e){var t="No errors.",n="FEN string must contain six space-delimited fields.",r="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",a="3rd field (castling availability) is invalid.",u="2nd field (side to move) is invalid.",c="1st field (piece positions) does not contain 8 '/'-delimited rows.",s="1st field (piece positions) is invalid [consecutive numbers].",l="1st field (piece positions) is invalid [invalid piece].",f="1st field (piece positions) is invalid [row too large].",d="Illegal en-passant square",p=e.split(/\s+/);if(6!==p.length)return{valid:!1,error_number:1,error:n};if(isNaN(p[5])||parseInt(p[5],10)<=0)return{valid:!1,error_number:2,error:r};if(isNaN(p[4])||parseInt(p[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(p[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(p[2]))return{valid:!1,error_number:5,error:a};if(!/^(w|b)$/.test(p[1]))return{valid:!1,error_number:6,error:u};var v=p[0].split("/");if(8!==v.length)return{valid:!1,error_number:7,error:c};for(var h=0;h<v.length;h++){for(var b=0,g=!1,m=0;m<v[h].length;m++)if(isNaN(v[h][m])){if(!/^[prnbqkPRNBQK]$/.test(v[h][m]))return{valid:!1,error_number:9,error:l};b+=1,g=!1}else{if(g)return{valid:!1,error_number:8,error:s};b+=parseInt(v[h][m],10),g=!0}if(8!==b)return{valid:!1,error_number:10,error:f}}return"3"==p[3][1]&&"w"==p[1]||"6"==p[3][1]&&"b"==p[1]?{valid:!1,error_number:11,error:d}:{valid:!0,error_number:0,error:t}}function K(){for(var e=0,o="",i=P.a8;i<=P.h1;i++){if(null==E[i])e++;else{e>0&&(o+=e,e=0);var a=E[i].color,u=E[i].type;o+=a===n?u.toUpperCase():u.toLowerCase()}i+1&136&&(e>0&&(o+=e),i!==P.h1&&(o+="/"),e=0,i+=8)}var c="";x[n]&y.KSIDE_CASTLE&&(c+="K"),x[n]&y.QSIDE_CASTLE&&(c+="Q"),x[t]&y.KSIDE_CASTLE&&(c+="k"),x[t]&y.QSIDE_CASTLE&&(c+="q"),c=c||"-";var s=S===r?"-":ae(S);return[o,A,c,s,M,T].join(" ")}function B(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(N[e[t]]=e[t+1]);return N}function U(e){L.length>0||(e!==f?(N.SetUp="1",N.FEN=e):(delete N.SetUp,delete N.FEN))}function z(e){var t=E[P[e]];return t?{type:t.type,color:t.color}:null}function Q(e,t){if(!("type"in e&&"color"in e))return!1;if(-1===l.indexOf(e.type.toLowerCase()))return!1;if(!(t in P))return!1;var n=P[t];return(e.type!=s||_[e.color]==r||_[e.color]==n)&&(E[n]={type:e.type,color:e.color},e.type===s&&(_[e.color]=n),U(K()),!0)}function W(e,t,n,r,i){var a={color:A,from:t,to:n,flags:r,piece:e[t].type};return i&&(a.flags|=y.PROMOTION,a.promotion=i),e[n]?a.captured=e[n].type:r&y.EP_CAPTURE&&(a.captured=o),a}function F(e){function t(e,t,n,r,s){if(e[n].type!==o||oe(r)!==k&&oe(r)!==w)t.push(W(e,n,r,s));else for(var l=[c,u,a,i],f=0,d=l.length;f<d;f++)t.push(W(e,n,r,s,l[f]))}var n=[],r=A,s=ue(r),l={b:j,w:O},f=P.a8,d=P.h1,h=!1,b=!(void 0!==e&&"legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in P))return[];f=d=P[e.square],h=!0}for(var g=f;g<=d;g++)if(136&g)g+=7;else{var m=E[g];if(null!=m&&m.color===r)if(m.type===o){var C=g+p[r][0];if(null==E[C]){t(E,n,g,C,y.NORMAL);C=g+p[r][1];l[r]===oe(g)&&null==E[C]&&t(E,n,g,C,y.BIG_PAWN)}for(M=2;M<4;M++){136&(C=g+p[r][M])||(null!=E[C]&&E[C].color===s?t(E,n,g,C,y.CAPTURE):C===S&&t(E,n,g,S,y.EP_CAPTURE))}}else for(var M=0,T=v[m.type].length;M<T;M++){var L=v[m.type][M];for(C=g;!(136&(C+=L));){if(null!=E[C]){if(E[C].color===r)break;t(E,n,g,C,y.CAPTURE);break}if(t(E,n,g,C,y.NORMAL),"n"===m.type||"k"===m.type)break}}}if(!h||d===_[r]){if(x[r]&y.KSIDE_CASTLE){var N=(I=_[r])+2;null!=E[I+1]||null!=E[N]||X(s,_[r])||X(s,I+1)||X(s,N)||t(E,n,_[r],N,y.KSIDE_CASTLE)}if(x[r]&y.QSIDE_CASTLE){var I;N=(I=_[r])-2;null!=E[I-1]||null!=E[I-2]||null!=E[I-3]||X(s,_[r])||X(s,I-1)||X(s,N)||t(E,n,_[r],N,y.QSIDE_CASTLE)}}if(!b)return n;var D=[];for(g=0,T=n.length;g<T;g++)te(n[g]),G(r)||D.push(n[g]),ne();return D}function H(e,t){var n="";if(e.flags&y.KSIDE_CASTLE)n="O-O";else if(e.flags&y.QSIDE_CASTLE)n="O-O-O";else{var r=function(e,t){for(var n=F({legal:!t}),r=e.from,o=e.to,i=e.piece,a=0,u=0,c=0,s=0,l=n.length;s<l;s++){var f=n[s].from,d=n[s].to,p=n[s].piece;i===p&&r!==f&&o===d&&(a++,oe(r)===oe(f)&&u++,ie(r)===ie(f)&&c++)}if(a>0)return u>0&&c>0?ae(r):c>0?ae(r).charAt(1):ae(r).charAt(0);return""}(e,t);e.piece!==o&&(n+=e.piece.toUpperCase()+r),e.flags&(y.CAPTURE|y.EP_CAPTURE)&&(e.piece===o&&(n+=ae(e.from)[0]),n+="x"),n+=ae(e.to),e.flags&y.PROMOTION&&(n+="="+e.promotion.toUpperCase())}return te(e),Z()&&(J()?n+="#":n+="+"),ne(),n}function $(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function X(e,r){for(var i=P.a8;i<=P.h1;i++)if(136&i)i+=7;else if(null!=E[i]&&E[i].color===e){var a=E[i],u=i-r,c=u+119;if(h[c]&1<<g[a.type]){if(a.type===o){if(u>0){if(a.color===n)return!0}else if(a.color===t)return!0;continue}if("n"===a.type||"k"===a.type)return!0;for(var s=b[c],l=i+s,f=!1;l!==r;){if(null!=E[l]){f=!0;break}l+=s}if(!f)return!0}}return!1}function G(e){return X(ue(e),_[e])}function Z(){return G(A)}function J(){return Z()&&0===F().length}function V(){return!Z()&&0===F().length}function Y(){for(var e={},t=[],n=0,r=0,o=P.a8;o<=P.h1;o++)if(r=(r+1)%2,136&o)o+=7;else{var u=E[o];u&&(e[u.type]=u.type in e?e[u.type]+1:1,u.type===a&&t.push(r),n++)}if(2===n)return!0;if(3===n&&(1===e[a]||1===e[i]))return!0;if(n===e[a]+2){var c=0,s=t.length;for(o=0;o<s;o++)c+=t[o];if(0===c||c===s)return!0}return!1}function ee(){for(var e=[],t={},n=!1;;){var r=ne();if(!r)break;e.push(r)}for(;;){var o=K().split(" ").slice(0,4).join(" ");if(t[o]=o in t?t[o]+1:1,t[o]>=3&&(n=!0),!e.length)break;te(e.pop())}return n}function te(e){var n=A,i=ue(n);if(function(e){L.push({move:e,kings:{b:_.b,w:_.w},turn:A,castling:{b:x.b,w:x.w},ep_square:S,half_moves:M,move_number:T})}(e),E[e.to]=E[e.from],E[e.from]=null,e.flags&y.EP_CAPTURE&&(A===t?E[e.to-16]=null:E[e.to+16]=null),e.flags&y.PROMOTION&&(E[e.to]={type:e.promotion,color:n}),E[e.to].type===s){if(_[E[e.to].color]=e.to,e.flags&y.KSIDE_CASTLE){var a=e.to-1,u=e.to+1;E[a]=E[u],E[u]=null}else if(e.flags&y.QSIDE_CASTLE){a=e.to+1,u=e.to-2;E[a]=E[u],E[u]=null}x[n]=""}if(x[n])for(var c=0,l=C[n].length;c<l;c++)if(e.from===C[n][c].square&&x[n]&C[n][c].flag){x[n]^=C[n][c].flag;break}if(x[i])for(c=0,l=C[i].length;c<l;c++)if(e.to===C[i][c].square&&x[i]&C[i][c].flag){x[i]^=C[i][c].flag;break}S=e.flags&y.BIG_PAWN?"b"===A?e.to-16:e.to+16:r,e.piece===o?M=0:e.flags&(y.CAPTURE|y.EP_CAPTURE)?M=0:M++,A===t&&T++,A=ue(A)}function ne(){var e=L.pop();if(null==e)return null;var n=e.move;_=e.kings,A=e.turn,x=e.castling,S=e.ep_square,M=e.half_moves,T=e.move_number;var r,i,a=A,u=ue(A);if(E[n.from]=E[n.to],E[n.from].type=n.piece,E[n.to]=null,n.flags&y.CAPTURE)E[n.to]={type:n.captured,color:u};else if(n.flags&y.EP_CAPTURE){var c;c=a===t?n.to-16:n.to+16,E[c]={type:o,color:u}}n.flags&(y.KSIDE_CASTLE|y.QSIDE_CASTLE)&&(n.flags&y.KSIDE_CASTLE?(r=n.to+1,i=n.to-1):n.flags&y.QSIDE_CASTLE&&(r=n.to-2,i=n.to+1),E[r]=E[i],E[i]=null);return n}function re(e,t){var n=$(e);if(t){var r=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(r)var o=r[1],i=r[2],a=r[3],u=r[4]}for(var c=F(),s=0,l=c.length;s<l;s++){if(n===$(H(c[s]))||t&&n===$(H(c[s],!0)))return c[s];if(r&&(!o||o.toLowerCase()==c[s].piece)&&P[i]==c[s].from&&P[a]==c[s].to&&(!u||u.toLowerCase()==c[s].promotion))return c[s]}return null}function oe(e){return e>>4}function ie(e){return 15&e}function ae(e){var t=ie(e),n=oe(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(n,n+1)}function ue(e){return e===n?t:n}function ce(e){var t=function e(t){var n=t instanceof Array?[]:{};for(var r in t)n[r]="object"==typeof r?e(t[r]):t[r];return n}(e);t.san=H(t,!1),t.to=ae(t.to),t.from=ae(t.from);var n="";for(var r in y)y[r]&t.flags&&(n+=m[r]);return t.flags=n,t}function se(e){return e.replace(/^\s+|\s+$/g,"")}return R(void 0===e?f:e),{WHITE:n,BLACK:t,PAWN:o,KNIGHT:i,BISHOP:a,ROOK:u,QUEEN:c,KING:s,SQUARES:function(){for(var e=[],t=P.a8;t<=P.h1;t++)136&t?t+=7:e.push(ae(t));return e}(),FLAGS:m,load:function(e){return R(e)},reset:function(){return D()},moves:function(e){for(var t=F(e),n=[],r=0,o=t.length;r<o;r++)void 0!==e&&"verbose"in e&&e.verbose?n.push(ce(t[r])):n.push(H(t[r],!1));return n},in_check:function(){return Z()},in_checkmate:function(){return J()},in_stalemate:function(){return V()},in_draw:function(){return M>=100||V()||Y()||ee()},insufficient_material:function(){return Y()},in_threefold_repetition:function(){return ee()},game_over:function(){return M>=100||J()||V()||Y()||ee()},validate_fen:function(e){return q(e)},fen:function(){return K()},pgn:function(e){var t="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\n",n="object"==typeof e&&"number"==typeof e.max_width?e.max_width:0,r=[],o=!1;for(var i in N)r.push("["+i+' "'+N[i]+'"]'+t),o=!0;o&&L.length&&r.push(t);for(var a=[];L.length>0;)a.push(ne());for(var u=[],c="";a.length>0;){var s=a.pop();L.length||"b"!==s.color?"w"===s.color&&(c.length&&u.push(c),c=T+"."):c=T+". ...",c=c+" "+H(s,!1),te(s)}if(c.length&&u.push(c),void 0!==N.Result&&u.push(N.Result),0===n)return r.join("")+u.join(" ");var l=0;for(i=0;i<u.length;i++)l+u[i].length>n&&0!==i?(" "===r[r.length-1]&&r.pop(),r.push(t),l=0):0!==i&&(r.push(" "),l++),r.push(u[i]),l+=u[i].length;return r.join("")},load_pgn:function(e,t){var n=void 0!==t&&"sloppy"in t&&t.sloppy;function r(e){return e.replace(/\\/g,"\\")}var o="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",i=new RegExp("^(\\[(.|"+r(o)+")*\\])("+r(o)+")*1.("+r(o)+"|.)*$","g"),a=e.replace(i,"$1");"["!==a[0]&&(a=""),D();var u=function(e,t){for(var n="object"==typeof t&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",o={},i=e.split(new RegExp(r(n))),a="",u="",c=0;c<i.length;c++)a=i[c].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),u=i[c].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),se(a).length>0&&(o[a]=u);return o}(a,t);for(var c in u)B([c,u[c]]);if("1"===u.SetUp&&!("FEN"in u&&R(u.FEN)))return!1;var s=e.replace(a,"").replace(new RegExp(r(o),"g")," ");s=s.replace(/(\{[^}]+\})+?/g,"");for(var l=/(\([^\(\)]+\))+?/g;l.test(s);)s=s.replace(l,"");var f=se(s=(s=(s=s.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));f=f.join(",").replace(/,,+/g,",").split(",");for(var p="",v=0;v<f.length-1;v++){if(null==(p=re(f[v],n)))return!1;te(p)}if(p=f[f.length-1],d.indexOf(p)>-1)(function(e){for(var t in e)return!0;return!1})(N)&&void 0===N.Result&&B(["Result",p]);else{if(null==(p=re(p,n)))return!1;te(p)}return!0},header:function(){return B(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=P.a8;t<=P.h1;t++){if(0===ie(t)&&(e+=" "+"87654321"[oe(t)]+" |"),null==E[t])e+=" . ";else{var r=E[t].type;e+=" "+(E[t].color===n?r.toUpperCase():r.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return A},move:function(e,t){var n=void 0!==t&&"sloppy"in t&&t.sloppy,r=null;if("string"==typeof e)r=re(e,n);else if("object"==typeof e)for(var o=F(),i=0,a=o.length;i<a;i++)if(!(e.from!==ae(o[i].from)||e.to!==ae(o[i].to)||"promotion"in o[i]&&e.promotion!==o[i].promotion)){r=o[i];break}if(!r)return null;var u=ce(r);return te(r),u},undo:function(){var e=ne();return e?ce(e):null},clear:function(){return I()},put:function(e,t){return Q(e,t)},get:function(e){return z(e)},remove:function(e){return function(e){var t=z(e);return E[P[e]]=null,t&&t.type===s&&(_[t.color]=r),U(K()),t}(e)},perft:function(e){return function e(t){for(var n=F({legal:!1}),r=0,o=A,i=0,a=n.length;i<a;i++){if(te(n[i]),!G(o))if(t-1>0)r+=e(t-1);else r++;ne()}return r}(e)},square_color:function(e){if(e in P){var t=P[e];return(oe(t)+ie(t))%2==0?"light":"dark"}return null},history:function(e){for(var t=[],n=[],r=(void 0!==e&&"verbose"in e&&e.verbose);L.length>0;)t.push(ne());for(;t.length>0;){var o=t.pop();r?n.push(ce(o)):n.push(H(o)),te(o)}return n}}};void 0!==n&&(n.Chess=r)},{}],2:[function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./util");function i(e,t){var n=e(t);return t.dom.redraw(),n}function a(e,t){return{key:e,pos:o.key2pos(e),piece:t}}n.anim=function(e,t){return t.animation.enabled?function(e,t){var n=r({},t.pieces),i=e(t),s=function(e,t){var n,r,i,u,c={},s=[],l={},f=[],d=[],p={};for(i in e)p[i]=a(i,e[i]);for(var v=0,h=o.allKeys;v<h.length;v++){var b=h[v];n=t.pieces[b],r=p[b],n?r?o.samePiece(n,r.piece)||(f.push(r),d.push(a(b,n))):d.push(a(b,n)):r&&f.push(r)}return d.forEach((function(e){var t,n;t=e,n=f.filter((function(t){return o.samePiece(e.piece,t.piece)})),(r=n.sort((function(e,n){return o.distanceSq(t.pos,e.pos)-o.distanceSq(t.pos,n.pos)}))[0])&&(u=[r.pos[0]-e.pos[0],r.pos[1]-e.pos[1]],c[e.key]=u.concat(u),s.push(r.key))})),f.forEach((function(e){o.containsX(s,e.key)||(l[e.key]=e.piece)})),{anims:c,fadings:l}}(n,t);if(c(s.anims)&&c(s.fadings))t.dom.redraw();else{var l=t.animation.current&&t.animation.current.start;t.animation.current={start:u.now(),frequency:1/t.animation.duration,plan:s},l||function e(t,n){var r=t.animation.current;if(void 0===r)return void(t.dom.destroyed||t.dom.redrawNow());var i=1-(n-r.start)*r.frequency;if(i<=0)t.animation.current=void 0,t.dom.redrawNow();else{var a=(l=i)<.5?4*l*l*l:(l-1)*(2*l-2)*(2*l-2)+1;for(var c in r.plan.anims){var s=r.plan.anims[c];s[2]=s[0]*a,s[3]=s[1]*a}t.dom.redrawNow(!0),o.raf((function(n){return void 0===n&&(n=u.now()),e(t,n)}))}var l}(t,u.now())}return i}(e,t):i(e,t)},n.render=i;var u=void 0!==window.performance?window.performance:Date;function c(e){for(var t in e)return!1;return!0}},{"./util":17}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./board"),o=e("./fen"),i=e("./config"),a=e("./anim"),u=e("./drag"),c=e("./explosion");n.start=function(e,t){function n(){r.toggleOrientation(e),t()}return{set:function(t){t.orientation&&t.orientation!==e.orientation&&n(),(t.fen?a.anim:a.render)((function(e){return i.configure(e,t)}),e)},state:e,getFen:function(){return o.write(e.pieces)},toggleOrientation:n,setPieces:function(t){a.anim((function(e){return r.setPieces(e,t)}),e)},selectSquare:function(t,n){t?a.anim((function(e){return r.selectSquare(e,t,n)}),e):e.selected&&(r.unselect(e),e.dom.redraw())},move:function(t,n){a.anim((function(e){return r.baseMove(e,t,n)}),e)},newPiece:function(t,n){a.anim((function(e){return r.baseNewPiece(e,t,n)}),e)},playPremove:function(){if(e.premovable.current){if(a.anim(r.playPremove,e))return!0;e.dom.redraw()}return!1},playPredrop:function(t){if(e.predroppable.current){var n=r.playPredrop(e,t);return e.dom.redraw(),n}return!1},cancelPremove:function(){a.render(r.unsetPremove,e)},cancelPredrop:function(){a.render(r.unsetPredrop,e)},cancelMove:function(){a.render((function(e){r.cancelMove(e),u.cancel(e)}),e)},stop:function(){a.render((function(e){r.stop(e),u.cancel(e)}),e)},explode:function(t){c.default(e,t)},setAutoShapes:function(t){a.render((function(e){return e.drawable.autoShapes=t}),e)},setShapes:function(t){a.render((function(e){return e.drawable.shapes=t}),e)},getKeyAtDomPos:function(t){return r.getKeyAtDomPos(t,"white"===e.orientation,e.dom.bounds())},redrawAll:t,dragNewPiece:function(t,n,r){u.dragNewPiece(e,t,n,r)},destroy:function(){r.stop(e),e.dom.unbind&&e.dom.unbind(),e.dom.destroyed=!0}}}},{"./anim":2,"./board":4,"./config":6,"./drag":7,"./explosion":10,"./fen":11}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util"),o=e("./premove");function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&setTimeout((function(){return e.apply(void 0,t)}),1)}function a(e){e.premovable.current&&(e.premovable.current=void 0,i(e.premovable.events.unset))}function u(e){var t=e.predroppable;t.current&&(t.current=void 0,i(t.events.unset))}function c(e,t,n){var o=e.pieces[t],a=e.pieces[n];if(t===n||!o)return!1;var u=a&&a.color!==o.color?a:void 0;return n==e.selected&&p(e),i(e.events.move,t,n,u),function(e,t,n){if(!e.autoCastle)return!1;var o=e.pieces[t];if(!o||"king"!==o.role)return!1;var i=r.key2pos(t);if(5!==i[0])return!1;if(1!==i[1]&&8!==i[1])return!1;var a,u,c,s=r.key2pos(n);if(7===s[0]||8===s[0])a=r.pos2key([8,i[1]]),u=r.pos2key([6,i[1]]),c=r.pos2key([7,i[1]]);else{if(3!==s[0]&&1!==s[0])return!1;a=r.pos2key([1,i[1]]),u=r.pos2key([4,i[1]]),c=r.pos2key([3,i[1]])}var l=e.pieces[a];return!(!l||"rook"!==l.role)&&(delete e.pieces[t],delete e.pieces[a],e.pieces[c]=o,e.pieces[u]=l,!0)}(e,t,n)||(e.pieces[n]=o,delete e.pieces[t]),e.lastMove=[t,n],e.check=void 0,i(e.events.change),u||!0}function s(e,t,n,o){if(e.pieces[n]){if(!o)return!1;delete e.pieces[n]}return i(e.events.dropNewPiece,t,n),e.pieces[n]=t,e.lastMove=[n],e.check=void 0,i(e.events.change),e.movable.dests=void 0,e.turnColor=r.opposite(e.turnColor),!0}function l(e,t,n){var o=c(e,t,n);return o&&(e.movable.dests=void 0,e.turnColor=r.opposite(e.turnColor),e.animation.current=void 0),o}function f(e,t,n){if(h(e,t,n)){var a=l(e,t,n);if(a){var c=e.hold.stop();p(e);var s={premove:!1,ctrlKey:e.stats.ctrlKey,holdTime:c};return!0!==a&&(s.captured=a),i(e.movable.events.after,t,n,s),!0}}else!function(e,t,n){return t!==n&&b(e,t)&&r.containsX(o.default(e.pieces,t,e.premovable.castle),n)}(e,t,n)?v(e,n)||b(e,n)?(d(e,n),e.hold.start()):p(e):(!function(e,t,n,r){u(e),e.premovable.current=[t,n],i(e.premovable.events.set,t,n,r)}(e,t,n,{ctrlKey:e.stats.ctrlKey}),p(e));return!1}function d(e,t){e.selected=t,b(e,t)?e.premovable.dests=o.default(e.pieces,t,e.premovable.castle):e.premovable.dests=void 0}function p(e){e.selected=void 0,e.premovable.dests=void 0,e.hold.cancel()}function v(e,t){var n=e.pieces[t];return!!n&&("both"===e.movable.color||e.movable.color===n.color&&e.turnColor===n.color)}function h(e,t,n){return t!==n&&v(e,t)&&(e.movable.free||!!e.movable.dests&&r.containsX(e.movable.dests[t],n))}function b(e,t){var n=e.pieces[t];return!!n&&e.premovable.enabled&&e.movable.color===n.color&&e.turnColor!==n.color}function g(e){a(e),u(e),p(e)}n.callUserFunction=i,n.toggleOrientation=function(e){e.orientation=r.opposite(e.orientation),e.animation.current=e.draggable.current=e.selected=void 0},n.reset=function(e){e.lastMove=void 0,p(e),a(e),u(e)},n.setPieces=function(e,t){for(var n in t){var r=t[n];r?e.pieces[n]=r:delete e.pieces[n]}},n.setCheck=function(e,t){if(!0===t&&(t=e.turnColor),t)for(var n in e.pieces)"king"===e.pieces[n].role&&e.pieces[n].color===t&&(e.check=n);else e.check=void 0},n.unsetPremove=a,n.unsetPredrop=u,n.baseMove=c,n.baseNewPiece=s,n.userMove=f,n.dropNewPiece=function(e,t,n,r){if(function(e,t,n){var r=e.pieces[t];return!!r&&n&&(t===n||!e.pieces[n])&&("both"===e.movable.color||e.movable.color===r.color&&e.turnColor===r.color)}(e,t,n)||r){var o=e.pieces[t];delete e.pieces[t],s(e,o,n,r),i(e.movable.events.afterNewPiece,o.role,n,{predrop:!1})}else!function(e,t,n){var r=e.pieces[t],o=e.pieces[n];return!!r&&n&&(!o||o.color!==e.movable.color)&&e.predroppable.enabled&&("pawn"!==r.role||"1"!==n[1]&&"8"!==n[1])&&e.movable.color===r.color&&e.turnColor!==r.color}(e,t,n)?(a(e),u(e)):function(e,t,n){a(e),e.predroppable.current={role:t,key:n},i(e.predroppable.events.set,t,n)}(e,e.pieces[t].role,n);delete e.pieces[t],p(e)},n.selectSquare=function(e,t,n){e.selected?e.selected!==t||e.draggable.enabled?(e.selectable.enabled||n)&&e.selected!==t?f(e,e.selected,t)&&(e.stats.dragged=!1):e.hold.start():(p(e),e.hold.cancel()):(v(e,t)||b(e,t))&&(d(e,t),e.hold.start()),i(e.events.select,t)},n.setSelected=d,n.unselect=p,n.canMove=h,n.isDraggable=function(e,t){var n=e.pieces[t];return!!n&&e.draggable.enabled&&("both"===e.movable.color||e.movable.color===n.color&&(e.turnColor===n.color||e.premovable.enabled))},n.playPremove=function(e){var t=e.premovable.current;if(!t)return!1;var n=t[0],r=t[1],o=!1;if(h(e,n,r)){var u=l(e,n,r);if(u){var c={premove:!0};!0!==u&&(c.captured=u),i(e.movable.events.after,n,r,c),o=!0}}return a(e),o},n.playPredrop=function(e,t){var n=e.predroppable.current,r=!1;return!!n&&(t(n)&&s(e,{role:n.role,color:e.movable.color},n.key)&&(i(e.movable.events.afterNewPiece,n.role,n.key,{predrop:!0}),r=!0),u(e),r)},n.cancelMove=g,n.stop=function(e){e.movable.color=e.movable.dests=e.animation.current=void 0,g(e)},n.getKeyAtDomPos=function(e,t,n){var o=Math.ceil((e[0]-n.left)/n.width*8);t||(o=9-o);var i=Math.ceil(8-(e[1]-n.top)/n.height*8);return t||(i=9-i),o>0&&o<9&&i>0&&i<9?r.pos2key([o,i]):void 0}},{"./premove":12,"./util":17}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./api"),o=e("./config"),i=e("./state"),a=e("./wrap"),u=e("./events"),c=e("./render"),s=e("./svg"),l=e("./util");function f(e){var t=!1;return function(){t||(t=!0,l.raf((function(){e(),t=!1})))}}n.Chessground=function(e,t){var n=i.defaults();function d(){var t=n.dom&&n.dom.unbind;e.classList.add("cg-board-wrap");var r=l.memo((function(){return e.getBoundingClientRect()})),o=n.viewOnly&&!n.drawable.visible,i=a.default(e,n,o?void 0:r()),p=function(e){c.default(n),!e&&i.svg&&s.renderSvg(n,i.svg)};n.dom={elements:i,bounds:r,redraw:f(p),redrawNow:p,unbind:t,relative:o},n.drawable.prevSvgHash="",p(!1),u.bindBoard(n),t||(n.dom.unbind=u.bindDocument(n,d))}return o.configure(n,t||{}),d(),r.start(n,d)}},{"./api":3,"./config":6,"./events":9,"./render":13,"./state":14,"./svg":15,"./util":17,"./wrap":18}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./board"),o=e("./fen");function i(e){return"object"==typeof e}n.configure=function(e,t){if(t.movable&&t.movable.dests&&(e.movable.dests=void 0),function e(t,n){for(var r in n)i(t[r])&&i(n[r])?e(t[r],n[r]):t[r]=n[r]}(e,t),t.fen&&(e.pieces=o.read(t.fen),e.drawable.shapes=[]),t.hasOwnProperty("check")&&r.setCheck(e,t.check||!1),t.hasOwnProperty("lastMove")&&!t.lastMove?e.lastMove=void 0:t.lastMove&&(e.lastMove=t.lastMove),e.selected&&r.setSelected(e,e.selected),(!e.animation.duration||e.animation.duration<100)&&(e.animation.enabled=!1),!e.movable.rookCastle&&e.movable.dests){var n="white"===e.movable.color?1:8,a="e"+n,u=e.movable.dests[a],c=e.pieces[a];if(!u||!c||"king"!==c.role)return;e.movable.dests[a]=u.filter((function(e){return!(e==="a"+n&&-1!==u.indexOf("c"+n)||e==="h"+n&&-1!==u.indexOf("g"+n))}))}}},{"./board":4,"./fen":11}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./board"),o=e("./util"),i=e("./draw"),a=e("./anim");function u(e){o.raf((function(){var t=e.draggable.current;if(t){e.animation.current&&e.animation.current.plan.anims[t.orig]&&(e.animation.current=void 0);var n=e.pieces[t.orig];if(n&&o.samePiece(n,t.piece)){if(!t.started&&o.distanceSq(t.epos,t.rel)>=Math.pow(e.draggable.distance,2)&&(t.started=!0),t.started){if("function"==typeof t.element){var r=t.element();if(!r)return;t.element=r,t.element.cgDragging=!0,t.element.classList.add("dragging")}var i="white"===e.orientation,a=e.dom.bounds();t.pos=[t.epos[0]-t.rel[0],t.epos[1]-t.rel[1]];var s=o.posToTranslateAbs(a)(t.origPos,i);s[0]+=t.pos[0]+t.dec[0],s[1]+=t.pos[1]+t.dec[1],o.translateAbs(t.element,s)}}else c(e);u(e)}}))}function c(e){var t=e.draggable.current;t&&(t.newPiece&&delete e.pieces[t.orig],e.draggable.current=void 0,r.unselect(e),s(e),e.dom.redraw())}function s(e){var t=e.dom.elements;t.ghost&&o.setVisible(t.ghost,!1)}function l(e,t,n){var r=o.key2pos(e);return t||(r[0]=9-r[0],r[1]=9-r[1]),{left:n.left+n.width*(r[0]-1)/8,top:n.top+n.height*(8-r[1])/8,width:n.width/8,height:n.height/8}}function f(e,t){for(var n=e.dom.elements.board.firstChild;n;){if(n.cgKey===t&&"PIECE"===n.tagName)return n;n=n.nextSibling}}n.start=function(e,t){if(!(void 0!==t.button&&0!==t.button||t.touches&&t.touches.length>1)){t.preventDefault();var n="white"===e.orientation,c=e.dom.bounds(),s=o.eventPosition(t),d=r.getKeyAtDomPos(s,n,c);if(d){var p=e.pieces[d],v=e.selected;v||!e.drawable.enabled||!e.drawable.eraseOnClick&&p&&p.color===e.turnColor||i.clear(e);var h=!!e.premovable.current,b=!!e.predroppable.current;e.stats.ctrlKey=t.ctrlKey,e.selected&&r.canMove(e,e.selected,d)?a.anim((function(e){return r.selectSquare(e,d)}),e):r.selectSquare(e,d);var g=e.selected===d,m=f(e,d);if(p&&m&&g&&r.isDraggable(e,d)){var y=l(d,n,c);e.draggable.current={orig:d,origPos:o.key2pos(d),piece:p,rel:s,epos:s,pos:[0,0],dec:e.draggable.centerPiece?[s[0]-(y.left+y.width/2),s[1]-(y.top+y.height/2)]:[0,0],started:e.draggable.autoDistance&&e.stats.dragged,element:m,previouslySelected:v,originTarget:t.target},m.cgDragging=!0,m.classList.add("dragging");var w=e.dom.elements.ghost;w&&(w.className="ghost "+p.color+" "+p.role,o.translateAbs(w,o.posToTranslateAbs(c)(o.key2pos(d),n)),o.setVisible(w,!0)),u(e)}else h&&r.unsetPremove(e),b&&r.unsetPredrop(e);e.dom.redraw()}}},n.dragNewPiece=function(e,t,n,r){e.pieces.a0=t,e.dom.redraw();var i=o.eventPosition(n),a="white"===e.orientation,c=e.dom.bounds(),s=l("a0",a,c),d=[(a?0:7)*s.width+c.left,(a?8:-1)*s.height+c.top];e.draggable.current={orig:"a0",origPos:o.key2pos("a0"),piece:t,rel:d,epos:i,pos:[i[0]-d[0],i[1]-d[1]],dec:[-s.width/2,-s.height/2],started:!0,element:function(){return f(e,"a0")},originTarget:n.target,newPiece:!0,force:r||!1},u(e)},n.move=function(e,t){e.draggable.current&&(!t.touches||t.touches.length<2)&&(e.draggable.current.epos=o.eventPosition(t))},n.end=function(e,t){var n=e.draggable.current;if(n)if("touchend"!==t.type||!n||n.originTarget===t.target||n.newPiece){r.unsetPremove(e),r.unsetPredrop(e);var i=o.eventPosition(t)||n.epos,a=r.getKeyAtDomPos(i,"white"===e.orientation,e.dom.bounds());a&&n.started?n.newPiece?r.dropNewPiece(e,n.orig,a,n.force):(e.stats.ctrlKey=t.ctrlKey,r.userMove(e,n.orig,a)&&(e.stats.dragged=!0)):n.newPiece?delete e.pieces[n.orig]:e.draggable.deleteOnDropOff&&(delete e.pieces[n.orig],r.callUserFunction(e.events.change)),(!n||n.orig!==n.previouslySelected||n.orig!==a&&a)&&e.selectable.enabled||r.unselect(e),s(e),e.draggable.current=void 0,e.dom.redraw()}else e.draggable.current=void 0},n.cancel=c},{"./anim":2,"./board":4,"./draw":8,"./util":17}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./board"),o=e("./util"),i=["green","red","blue","yellow"];function a(e){o.raf((function(){var t=e.drawable.current;if(t){var n=r.getKeyAtDomPos(t.pos,"white"===e.orientation,e.dom.bounds());n!==t.mouseSq&&(t.mouseSq=n,t.dest=n!==t.orig?n:void 0,e.dom.redrawNow()),a(e)}}))}function u(e){e.drawable.current&&(e.drawable.current=void 0,e.dom.redraw())}function c(e){var t=e.shiftKey&&o.isRightButton(e)?1:0,n=e.altKey?2:0;return i[t+n]}function s(e){e.onChange&&e.onChange(e.shapes)}n.start=function(e,t){if(!(t.touches&&t.touches.length>1)){t.stopPropagation(),t.preventDefault(),t.ctrlKey?r.unselect(e):r.cancelMove(e);var n=o.eventPosition(t),i=r.getKeyAtDomPos(n,"white"===e.orientation,e.dom.bounds());i&&(e.drawable.current={orig:i,pos:n,brush:c(t)},a(e))}},n.processDraw=a,n.move=function(e,t){e.drawable.current&&(e.drawable.current.pos=o.eventPosition(t))},n.end=function(e){var t=e.drawable.current;t&&(t.mouseSq&&function(e,t){var n=function(e){return e.orig===t.orig&&e.dest===t.dest},r=e.shapes.filter(n)[0];r&&(e.shapes=e.shapes.filter((o=n,function(e){return!o(e)})));var o;r&&r.brush===t.brush||e.shapes.push(t);s(e)}(e.drawable,t),u(e))},n.cancel=u,n.clear=function(e){e.drawable.shapes.length&&(e.drawable.shapes=[],e.dom.redraw(),s(e.drawable))}},{"./board":4,"./util":17}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./drag"),o=e("./draw"),i=e("./util");function a(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n)}}function u(e,t,n){return function(r){r.shiftKey||i.isRightButton(r)?e.drawable.enabled&&n(e,r):e.viewOnly||t(e,r)}}n.bindBoard=function(e){if(!e.viewOnly){var t=e.dom.elements.board,n=function(e){return function(t){e.draggable.current?r.cancel(e):e.drawable.current?o.cancel(e):t.shiftKey||i.isRightButton(t)?e.drawable.enabled&&o.start(e,t):e.viewOnly||r.start(e,t)}}(e);t.addEventListener("touchstart",n),t.addEventListener("mousedown",n),(e.disableContextMenu||e.drawable.enabled)&&t.addEventListener("contextmenu",(function(e){return e.preventDefault()}))}},n.bindDocument=function(e,t){var n=[];if(!e.dom.relative&&e.resizable){n.push(a(document.body,"chessground.resize",(function(){e.dom.bounds.clear(),i.raf(t)})))}if(!e.viewOnly){var c=u(e,r.move,o.move),s=u(e,r.end,o.end);["touchmove","mousemove"].forEach((function(e){return n.push(a(document,e,c))})),["touchend","mouseup"].forEach((function(e){return n.push(a(document,e,s))}));var l=function(){return e.dom.bounds.clear()};n.push(a(window,"scroll",l,{passive:!0})),n.push(a(window,"resize",l,{passive:!0}))}return function(){return n.forEach((function(e){return e()}))}}},{"./drag":7,"./draw":8,"./util":17}],10:[function(e,t,n){"use strict";function r(e,t){e.exploding&&(t?e.exploding.stage=t:e.exploding=void 0,e.dom.redraw())}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){e.exploding={stage:1,keys:t},e.dom.redraw(),setTimeout((function(){r(e,2),setTimeout((function(){return r(e,void 0)}),120)}),120)}},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util"),o=e("./types");n.initial="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR";var i={p:"pawn",r:"rook",n:"knight",b:"bishop",q:"queen",k:"king"},a={pawn:"p",rook:"r",knight:"n",bishop:"b",queen:"q",king:"k"};n.read=function(e){"start"===e&&(e=n.initial);for(var t={},o=8,a=0,u=0,c=e;u<c.length;u++){var s=c[u];switch(s){case" ":return t;case"/":if(0===--o)return t;a=0;break;case"~":var l=t[r.pos2key([a,o])];l&&(l.promoted=!0);break;default:var f=s.charCodeAt(0);if(f<57)a+=f-48;else{++a;var d=s.toLowerCase();t[r.pos2key([a,o])]={role:i[d],color:s===d?"black":"white"}}}}return t},n.write=function(e){return r.invRanks.map((function(t){return o.ranks.map((function(n){var o=e[r.pos2key([n,t])];if(o){var i=a[o.role];return"white"===o.color?i.toUpperCase():i}return"1"})).join("")})).join("/").replace(/1{2,}/g,(function(e){return e.length.toString()}))}},{"./types":16,"./util":17}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util");function o(e,t){return Math.abs(e-t)}var i=function(e,t,n,r){var i=o(e,n),a=o(t,r);return 1===i&&2===a||2===i&&1===a},a=function(e,t,n,r){return o(e,n)===o(t,r)},u=function(e,t,n,r){return e===n||t===r},c=function(e,t,n,r){return a(e,t,n,r)||u(e,t,n,r)};n.default=function(e,t,n){var s,l,f=e[t],d=r.key2pos(t);switch(f.role){case"pawn":l=f.color,s=function(e,t,n,r){return o(e,n)<2&&("white"===l?r===t+1||t<=2&&r===t+2&&e===n:r===t-1||t>=7&&r===t-2&&e===n)};break;case"knight":s=i;break;case"bishop":s=a;break;case"rook":s=u;break;case"queen":s=c;break;case"king":s=function(e,t,n){return function(i,a,u,c){return o(i,u)<2&&o(a,c)<2||n&&a===c&&a===("white"===e?1:8)&&(5===i&&(3===u||7===u)||r.containsX(t,u))}}(f.color,function(e,t){return Object.keys(e).filter((function(n){var r=e[n];return r&&r.color===t&&"rook"===r.role})).map((function(e){return r.key2pos(e)[0]}))}(e,f.color),n)}return r.allKeys.map(r.key2pos).filter((function(e){return(d[0]!==e[0]||d[1]!==e[1])&&s(d[0],d[1],e[0],e[1])})).map(r.pos2key)}},{"./util":17}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util"),o=e("./util");function i(e){return"PIECE"===e.tagName}function a(e){return"SQUARE"===e.tagName}function u(e,t){for(var n in t)e.dom.elements.board.removeChild(t[n])}function c(e,t){var n=2+8*(e[1]-1)+(8-e[0]);return t&&(n=67-n),n+""}function s(e){return e.color+" "+e.role}function l(e,t,n){e[t]?e[t]+=" "+n:e[t]=n}n.default=function(e){var t,n,f,d,p,v,h,b,g,m,y,w="white"===e.orientation,O=e.dom.relative?o.posToTranslateRel:o.posToTranslateAbs(e.dom.bounds()),j=e.dom.relative?o.translateRel:o.translateAbs,k=e.dom.elements.board,P=e.pieces,C=e.animation.current,E=C?C.plan.anims:{},_=C?C.plan.fadings:{},A=e.draggable.current,x=function(e){var t,n,r={};if(e.lastMove&&e.highlight.lastMove)for(t in e.lastMove)l(r,e.lastMove[t],"last-move");e.check&&e.highlight.check&&l(r,e.check,"check");if(e.selected&&(l(r,e.selected,"selected"),e.movable.showDests)){var o=e.movable.dests&&e.movable.dests[e.selected];if(o)for(t in o)n=o[t],l(r,n,"move-dest"+(e.pieces[n]?" oc":""));var i=e.premovable.dests;if(i)for(t in i)n=i[t],l(r,n,"premove-dest"+(e.pieces[n]?" oc":""))}var a=e.premovable.current;if(a)for(t in a)l(r,a[t],"current-premove");else e.predroppable.current&&l(r,e.predroppable.current.key,"current-premove");var u=e.exploding;if(u)for(t in u.keys)l(r,u.keys[t],"exploding"+u.stage);return r}(e),S={},M={},T={},L={},N=Object.keys(P);for(f=k.firstChild;f;){if(t=f.cgKey,i(f))if(d=P[t],v=E[t],h=_[t],p=f.cgPiece,!f.cgDragging||A&&A.orig===t||(f.classList.remove("dragging"),j(f,O(r.key2pos(t),w)),f.cgDragging=!1),!h&&f.cgFading&&(f.cgFading=!1,f.classList.remove("fading")),d){if(v&&f.cgAnimating&&p===s(d))(B=r.key2pos(t))[0]+=v[2],B[1]+=v[3],f.classList.add("anim"),j(f,O(B,w));else f.cgAnimating&&(f.cgAnimating=!1,f.classList.remove("anim"),j(f,O(r.key2pos(t),w)),e.addPieceZIndex&&(f.style.zIndex=c(r.key2pos(t),w)));p!==s(d)||h&&f.cgFading?h&&p===s(h)?(f.classList.add("fading"),f.cgFading=!0):T[p]?T[p].push(f):T[p]=[f]:S[t]=!0}else T[p]?T[p].push(f):T[p]=[f];else if(a(f)){var I=f.className;x[t]===I?M[t]=!0:L[I]?L[I].push(f):L[I]=[f]}f=f.nextSibling}for(var D in x)if(!M[D]){y=(m=L[x[D]])&&m.pop();var R=O(r.key2pos(D),w);if(y)y.cgKey=D,j(y,R);else{var q=r.createEl("square",x[D]);q.cgKey=D,j(q,R),k.insertBefore(q,k.firstChild)}}for(var K in N)if(n=P[t=N[K]],v=E[t],!S[t])if(g=(b=T[s(n)])&&b.pop()){g.cgKey=t,g.cgFading&&(g.classList.remove("fading"),g.cgFading=!1);var B=r.key2pos(t);e.addPieceZIndex&&(g.style.zIndex=c(B,w)),v&&(g.cgAnimating=!0,g.classList.add("anim"),B[0]+=v[2],B[1]+=v[3]),j(g,O(B,w))}else{var U=s(n),z=r.createEl("piece",U);B=r.key2pos(t);z.cgPiece=U,z.cgKey=t,v&&(z.cgAnimating=!0,B[0]+=v[2],B[1]+=v[3]),j(z,O(B,w)),e.addPieceZIndex&&(z.style.zIndex=c(B,w)),k.appendChild(z)}for(var Q in T)u(e,T[Q]);for(var Q in L)u(e,L[Q])}},{"./util":17}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./fen"),o=e("./util");n.defaults=function(){return{pieces:r.read(r.initial),orientation:"white",turnColor:"white",coordinates:!0,autoCastle:!0,viewOnly:!1,disableContextMenu:!1,resizable:!0,addPieceZIndex:!1,pieceKey:!1,highlight:{lastMove:!0,check:!0},animation:{enabled:!0,duration:200},movable:{free:!0,color:"both",showDests:!0,events:{},rookCastle:!0},premovable:{enabled:!0,showDests:!0,castle:!0,events:{}},predroppable:{enabled:!1,events:{}},draggable:{enabled:!0,distance:3,autoDistance:!0,centerPiece:!0,showGhost:!0,deleteOnDropOff:!1},selectable:{enabled:!0},stats:{dragged:!("ontouchstart"in window)},events:{},drawable:{enabled:!0,visible:!0,eraseOnClick:!0,shapes:[],autoShapes:[],brushes:{green:{key:"g",color:"#15781B",opacity:1,lineWidth:10},red:{key:"r",color:"#882020",opacity:1,lineWidth:10},blue:{key:"b",color:"#003088",opacity:1,lineWidth:10},yellow:{key:"y",color:"#e68f00",opacity:1,lineWidth:10},paleBlue:{key:"pb",color:"#003088",opacity:.4,lineWidth:15},paleGreen:{key:"pg",color:"#15781B",opacity:.4,lineWidth:15},paleRed:{key:"pr",color:"#882020",opacity:.4,lineWidth:15},paleGrey:{key:"pgr",color:"#4a4a4a",opacity:.35,lineWidth:15}},pieces:{baseUrl:"https://lichess1.org/assets/piece/cburnett/"},prevSvgHash:""},hold:o.timer()}}},{"./fen":11,"./util":17}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=e("./util");function i(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function a(e,t,n){var r,o=e.orig,i=e.dest,a=e.brush,c=e.piece,s=e.modifiers;return[n,o,i,a,i&&t[i]>1,c&&u(c),s&&(r=s,""+(r.lineWidth||""))].filter((function(e){return e})).join("")}function u(e){return[e.color,e.role,e.scale].filter((function(e){return e})).join("")}function c(e){var t=s(i("marker"),{id:"arrowhead-"+e.key,orient:"auto",markerWidth:4,markerHeight:8,refX:2.05,refY:2.01});return t.appendChild(s(i("path"),{d:"M0,0 V4 L3,2 Z",fill:e.color})),t.setAttribute("cgKey",e.key),t}function s(e,t){for(var n in t)e.setAttribute(n,t[n]);return e}function l(e,t){return"white"===t?e:[9-e[0],9-e[1]]}function f(e,t){var n={color:e.color,opacity:Math.round(10*e.opacity)/10,lineWidth:Math.round(t.lineWidth||e.lineWidth)};return n.key=[e.key,t.lineWidth].filter((function(e){return e})).join(""),n}function d(e,t,n){return(e.lineWidth||10)*(t?.85:1)/512*n.width}function p(e,t){return(e.opacity||1)*(t?.9:1)}function v(e,t){return[(e[0]-.5)*t.width/8,(8.5-e[1])*t.height/8]}n.createElement=i,n.renderSvg=function(e,t){var n=e.drawable,u=n.current,h=u&&u.mouseSq?u:void 0,b={};n.shapes.concat(n.autoShapes).concat(h?[h]:[]).forEach((function(e){e.dest&&(b[e.dest]=(b[e.dest]||0)+1)}));var g=n.shapes.concat(n.autoShapes).map((function(e){return{shape:e,current:!1,hash:a(e,b,!1)}}));h&&g.push({shape:h,current:!0,hash:a(h,b,!0)});var m=g.map((function(e){return e.hash})).join("");if(m!==e.drawable.prevSvgHash){e.drawable.prevSvgHash=m;var y=t.firstChild;!function(e,t,n){var r,o={};t.forEach((function(t){t.shape.dest&&(r=e.brushes[t.shape.brush],t.shape.modifiers&&(r=f(r,t.shape.modifiers)),o[r.key]=r)}));var i={},a=n.firstChild;for(;a;)i[a.getAttribute("cgKey")]=!0,a=a.nextSibling;for(var u in o)i[u]||n.appendChild(c(o[u]))}(n,g,y),function(e,t,n,a,u,c){void 0===r&&(r=o.computeIsTrident());var h=e.dom.bounds(),b={},g=[];t.forEach((function(e){b[e.hash]=!1}));var m,y=c.nextSibling;for(;y;)m=y.getAttribute("cgHash"),b.hasOwnProperty(m)?b[m]=!0:g.push(y),y=y.nextSibling;g.forEach((function(e){return u.removeChild(e)})),t.forEach((function(t){b[t.hash]||u.appendChild(function(e,t,n,a,u){var c,h=t.shape,b=t.current,g=t.hash;if(h.piece)c=function(e,t,n,r){var o=v(t,r),a=r.width/8*(n.scale||1),u=n.color[0]+("knight"===n.role?"n":n.role[0]).toUpperCase();return s(i("image"),{className:n.role+" "+n.color,x:o[0]-a/2,y:o[1]-a/2,width:a,height:a,href:e+u+".svg"})}(e.drawable.pieces.baseUrl,l(o.key2pos(h.orig),e.orientation),h.piece,u);else{var m=l(o.key2pos(h.orig),e.orientation);if(h.orig&&h.dest){var y=n[h.brush];h.modifiers&&(y=f(y,h.modifiers)),c=function(e,t,n,o,a,u){var c=function(e,t){return r?0:(t?20:10)/512*e.width}(u,a&&!o),l=v(t,u),f=v(n,u),h=f[0]-l[0],b=f[1]-l[1],g=Math.atan2(b,h),m=Math.cos(g)*c,y=Math.sin(g)*c;return s(i("line"),{stroke:e.color,"stroke-width":d(e,o,u),"stroke-linecap":"round","marker-end":r?void 0:"url(#arrowhead-"+e.key+")",opacity:p(e,o),x1:l[0],y1:l[1],x2:f[0]-m,y2:f[1]-y})}(y,m,l(o.key2pos(h.dest),e.orientation),b,a[h.dest]>1,u)}else c=function(e,t,n,r){var o=v(t,r),a=function(e){var t=e.width/512;return[3*t,4*t]}(r),u=(r.width+r.height)/32;return s(i("circle"),{stroke:e.color,"stroke-width":a[n?0:1],fill:"none",opacity:p(e,n),cx:o[0],cy:o[1],r:u-a[1]/2})}(n[h.brush],m,b,u)}return c.setAttribute("cgHash",g),c}(e,t,n,a,h))}))}(e,g,n.brushes,b,t,y)}}},{"./util":17}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.files=["a","b","c","d","e","f","g","h"],n.ranks=[1,2,3,4,5,6,7,8]},{}],17:[function(e,t,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0});var o=e("./types");n.colors=["white","black"],n.invRanks=[8,7,6,5,4,3,2,1],n.allKeys=(r=Array.prototype).concat.apply(r,o.files.map((function(e){return o.ranks.map((function(t){return e+t}))}))),n.pos2key=function(e){return n.allKeys[8*e[0]+e[1]-9]},n.key2pos=function(e){return[e.charCodeAt(0)-96,e.charCodeAt(1)-48]},n.memo=function(e){var t,n=function(){return void 0===t&&(t=e()),t};return n.clear=function(){t=void 0},n},n.timer=function(){var e;return{start:function(){e=Date.now()},cancel:function(){e=void 0},stop:function(){if(!e)return 0;var t=Date.now()-e;return e=void 0,t}}},n.opposite=function(e){return"white"===e?"black":"white"},n.containsX=function(e,t){return void 0!==e&&-1!==e.indexOf(t)},n.distanceSq=function(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)},n.samePiece=function(e,t){return e.role===t.role&&e.color===t.color},n.computeIsTrident=function(){return window.navigator.userAgent.indexOf("Trident/")>-1};var i=function(e,t,n,r){return[(t?e[0]-1:8-e[0])*n,(t?8-e[1]:e[1]-1)*r]};n.posToTranslateAbs=function(e){var t=e.width/8,n=e.height/8;return function(e,r){return i(e,r,t,n)}},n.posToTranslateRel=function(e,t){return i(e,t,12.5,12.5)},n.translateAbs=function(e,t){e.style.transform="translate("+t[0]+"px,"+t[1]+"px)"},n.translateRel=function(e,t){e.style.left=t[0]+"%",e.style.top=t[1]+"%"},n.setVisible=function(e,t){e.style.visibility=t?"visible":"hidden"},n.eventPosition=function(e){return e.clientX||0===e.clientX?[e.clientX,e.clientY]:e.touches&&e.targetTouches[0]?[e.targetTouches[0].clientX,e.targetTouches[0].clientY]:void 0},n.isRightButton=function(e){return 2===e.buttons||2===e.button},n.createEl=function(e,t){var n=document.createElement(e);return t&&(n.className=t),n},n.raf=(window.requestAnimationFrame||window.setTimeout).bind(window)},{"./types":16}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./util"),o=e("./types"),i=e("./svg");function a(e,t){var n,o=r.createEl("coords",t);for(var i in e)(n=r.createEl("coord")).textContent=e[i],o.appendChild(n);return o}n.default=function(e,t,n){e.innerHTML="",e.classList.add("cg-board-wrap"),r.colors.forEach((function(n){e.classList.toggle("orientation-"+n,t.orientation===n)})),e.classList.toggle("manipulable",!t.viewOnly);var u,c,s=r.createEl("div","cg-board");if(e.appendChild(s),t.drawable.visible&&n&&((u=i.createElement("svg")).appendChild(i.createElement("defs")),e.appendChild(u)),t.coordinates){var l="black"===t.orientation?" black":"";e.appendChild(a(o.ranks,"ranks"+l)),e.appendChild(a(o.files,"files"+l))}return n&&t.draggable.showGhost&&(c=r.createEl("piece","ghost"),r.setVisible(c,!1),e.appendChild(c)),{board:s,ghost:c,svg:u}}},{"./svg":15,"./types":16,"./util":17}],19:[function(e,t,n){
/*!
 * v2.1.4-104-gc868b3a
 * 
 */
var r,o;r="undefined"!=typeof self?self:this,o=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";n.d(t,"j",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"h",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"k",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"i",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return v}));var r=n(1),o=s((function(e,t){var n=t.length;return s((function(r){for(var o=0;o<r.length;o++)t[n+o]=r[o];return t.length=n+r.length,e.apply(this,t)}))}));function i(e,t){return function(){return e.call(this,t.apply(this,arguments))}}function a(e){return function(t){return t[e]}}s((function(e){var t=Object(r.c)(e);function n(e,t){return[c(e,t)]}return s((function(e){return Object(r.f)(n,e,t)[0]}))}));var u=s((function(e){return s((function(t){for(var n,r=0;r<a("length")(e);r++)if(n=c(t,e[r]))return n}))}));function c(e,t){return t.apply(void 0,e)}function s(e){var t=e.length-1,n=Array.prototype.slice;if(0===t)return function(){return e.call(this,n.call(arguments))};if(1===t)return function(){return e.call(this,arguments[0],n.call(arguments,1))};var r=Array(e.length);return function(){for(var o=0;o<t;o++)r[o]=arguments[o];return r[t]=n.call(arguments,t),e.apply(this,r)}}function l(e){return function(t,n){return e(n,t)}}function f(e,t){return function(n){return e(n)&&t(n)}}function d(){}function p(){return!0}function v(e){return function(){return e}}},function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"l",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return f})),n.d(t,"f",(function(){return d})),n.d(t,"m",(function(){return p})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"k",(function(){return b})),n.d(t,"e",(function(){return g}));var r=n(0);function o(e,t){return[e,t]}var i=null,a=Object(r.c)(0),u=Object(r.c)(1);function c(e){return b(e.reduce(Object(r.e)(o),i))}var s=Object(r.k)(c);function l(e){return d((function(e,t){return e.unshift(t),e}),[],e)}function f(e,t){return t?o(e(a(t)),f(e,u(t))):i}function d(e,t,n){return n?e(d(e,t,u(n)),a(n)):t}function p(e,t,n){return function e(n,r){return n?t(a(n))?(r(a(n)),u(n)):o(a(n),e(u(n),r)):i}(e,n||r.i)}function v(e,t){return!t||e(a(t))&&v(e,u(t))}function h(e,t){e&&(a(e).apply(null,t),h(u(e),t))}function b(e){return function e(t,n){return t?e(u(t),o(a(t),n)):n}(e,i)}function g(e,t){return t&&(e(a(t))?a(t):g(e,u(t)))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(1),o=n(0);function i(e,t){return t&&t.constructor===e}var a=Object(o.c)("length"),u=Object(o.j)(i,String);function c(e){return void 0!==e}function s(e,t){return t instanceof Object&&Object(r.a)((function(e){return e in t}),e)}},function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"m",(function(){return d})),n.d(t,"n",(function(){return p})),n.d(t,"a",(function(){return v})),n.d(t,"j",(function(){return h})),n.d(t,"l",(function(){return b})),n.d(t,"k",(function(){return g})),n.d(t,"o",(function(){return m}));var r=1,o=r++,i=r++,a=r++,u=r++,c="fail",s=r++,l=r++,f="start",d="data",p="end",v=r++,h=r++,b=r++,g=r++;function m(e,t,n){try{var r=JSON.parse(t)}catch(e){}return{statusCode:e,body:t,jsonBody:r,thrown:n}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));var r=n(0);function o(e,t){return{key:e,node:t}}var i=Object(r.c)("key"),a=Object(r.c)("node")},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),o=n(0),i=n(2),a=n(8),u=n(9);function c(e){var t=Object(r.h)("resume","pause","pipe"),n=Object(o.j)(i.b,t);return e?n(e)||Object(i.d)(e)?Object(a.a)(u.a,e):Object(a.a)(u.a,e.url,e.method,e.body,e.headers,e.withCredentials,e.cached):Object(u.a)()}c.drop=function(){return c.drop}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n(3),o=n(4),i=n(2),a=n(1),u={};function c(e){var t=e(r.f).emit,n=e(r.d).emit,c=e(r.i).emit,s=e(r.h).emit;function l(e,t,n){Object(o.c)(Object(a.g)(e))[t]=n}function f(e,n,r){e&&l(e,n,r);var i=Object(a.d)(Object(o.b)(n,r),e);return t(i),i}var d={};return d[r.l]=function(e,t){if(!e)return c(t),f(e,u,t);var n=function(e,t){var n=Object(o.c)(Object(a.g)(e));return Object(i.c)(Array,n)?f(e,Object(i.e)(n),t):e}(e,t),r=Object(a.l)(n),s=Object(o.a)(Object(a.g)(n));return l(r,s,t),Object(a.d)(Object(o.b)(s,t),r)},d[r.k]=function(e){return n(e),Object(a.l)(e)||s(Object(o.c)(Object(a.g)(e)))},d[r.j]=f,d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5);t.default=r.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2);function o(e,t,n,o,i,a,u){return i=i?JSON.parse(JSON.stringify(i)):{},o?(Object(r.d)(o)||(o=JSON.stringify(o),i["Content-Type"]=i["Content-Type"]||"application/json"),i["Content-Length"]=i["Content-Length"]||o.length):o=null,e(n||"GET",function(e,t){return!1===t&&(-1===e.indexOf("?")?e+="?":e+="&",e+="_="+(new Date).getTime()),e}(t,u),o,i,a||!1)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(10),o=n(12),i=n(6),a=n(13),u=n(14),c=n(16),s=n(17),l=n(18);function f(e,t,n,f,d){var p=Object(r.a)();return t&&Object(l.b)(p,Object(l.a)(),e,t,n,f,d),Object(s.a)(p),Object(o.a)(p,Object(i.b)(p)),Object(a.a)(p,u.a),Object(c.a)(p,t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(11),o=n(0);function i(){var e={},t=i("newListener"),n=i("removeListener");function i(o){return e[o]=Object(r.a)(o,t,n),e[o]}function a(t){return e[t]||i(t)}return["emit","on","un"].forEach((function(e){a[e]=Object(o.k)((function(t,n){Object(o.b)(n,a(t)[e])}))})),a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1),o=n(2),i=n(0);function a(e,t,n){var a,u;function c(e){return function(t){return t.id===e}}return{on:function(n,o){var i={listener:n,id:o||n};return t&&t.emit(e,n,i.id),a=Object(r.d)(i,a),u=Object(r.d)(n,u),this},emit:function(){Object(r.b)(u,arguments)},un:function(t){var o;a=Object(r.m)(a,c(t),(function(e){o=e})),o&&(u=Object(r.m)(u,(function(e){return e===o.listener})),n&&n.emit(e,o.listener,o.id))},listeners:function(){return u},hasListener:function(e){var t=e?c(e):i.a;return Object(o.a)(Object(r.e)(t,a))}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(4),o=n(3),i=n(1);function a(e,t){var n,a={};function u(e){return function(t){n=e(n,t)}}for(var c in t)e(c).on(u(t[c]),a);e(o.g).on((function(e){var t=Object(i.g)(n),o=Object(r.a)(t),a=Object(i.l)(n);a&&(Object(r.c)(Object(i.g)(a))[o]=e)})),e(o.e).on((function(){var e=Object(i.g)(n),t=Object(r.a)(e),o=Object(i.l)(n);o&&delete Object(r.c)(Object(i.g)(o))[t]})),e(o.a).on((function(){for(var n in t)e(n).un(a)}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(3),o=n(1),i=n(4);function a(e,t){var n={node:e(r.d),path:e(r.f)};function a(t,n,r){var a=e(t).emit;n.on((function(e){var t=r(e);!1!==t&&function(e,t,n){var r=Object(o.k)(n);e(t,Object(o.i)(Object(o.l)(Object(o.j)(i.a,r))),Object(o.i)(Object(o.j)(i.c,r)))}(a,Object(i.c)(t),e)}),t),e("removeListener").on((function(r){r===t&&(e(r).listeners()||n.un(t))}))}e("newListener").on((function(e){var r=/(node|path):(.*)/.exec(e);if(r){var o=n[r[1]];o.hasListener(e)||a(e,o,t(r[2]))}}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),o=n(1),i=n(4),a=n(2),u=n(6),c=n(15),s=Object(c.a)((function(e,t,n,c,s){var l=1,f=2,d=3,p=Object(r.d)(i.a,o.g),v=Object(r.d)(i.c,o.g);function h(e,t){return t[l]?Object(r.g)(e,o.g):e}function b(e){return e===r.a?r.a:Object(r.g)((function(e){return p(e)!==u.a}),Object(r.d)(e,o.l))}function g(){return function(e){return p(e)===u.a}}function m(e,t,n,r,i){var u=e(n);if(u){var c=function(e,t,n){return Object(o.f)((function(e,t){return t(e,n)}),t,e)}(t,r,u);return i(n.substr(Object(a.e)(u[0])),c)}}function y(e,t){return Object(r.j)(m,e,t)}var w=Object(r.h)(y(e,Object(o.h)(h,(function(e,t){var n=t[d];if(!n)return e;var i=Object(r.j)(a.b,Object(o.c)(n.split(/\W+/))),u=Object(r.d)(i,v);return Object(r.g)(u,e)}),(function(e,t){var n=t[f],o=n&&"*"!==n?function(e){return String(p(e))===n}:r.a;return Object(r.g)(o,e)}),b)),y(t,Object(o.h)((function(e){if(e===r.a)return r.a;var t=g(),n=e,o=b((function(e){return i(e)})),i=Object(r.h)(t,n,o);return i}))),y(n,Object(o.h)()),y(c,Object(o.h)(h,g)),y(s,Object(o.h)((function(e){return function(t){var n=e(t);return!0===n?Object(o.g)(t):n}}))),(function(e){throw Error('"'+e+'" could not be tokenised')}));function O(e,t){return t}function j(e,t){return w(e,t,e?j:O)}return function(e){try{return j(e,r.a)}catch(t){throw Error('Could not compile "'+e+'" because '+t.message)}}}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,o,i,a,u,c,s,l,f,d,p,v=n(0),h=(r=Object(v.k)((function(e){return e.unshift(/^/),(t=RegExp(e.map(Object(v.c)("source")).join(""))).exec.bind(t);var t})),a=r(o=/(\$?)/,/([\w-_]+|\*)/,i=/(?:{([\w ]*?)})?/),u=r(o,/\["([^"]+)"\]/,i),c=r(o,/\[(\d+|\*)\]/,i),s=r(o,/()/,/{([\w ]*?)}/),l=r(/\.\./),f=r(/\./),d=r(o,/!/),p=r(/$/),function(e){return e(Object(v.h)(a,u,c,s),l,f,d,p)})},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),o=n(0),i=n(2),a=n(5);function u(e,t){var n,u=/^(node|path):./,c=e(r.h),s=e(r.e).emit,l=e(r.g).emit,f=Object(o.k)((function(t,r){if(n[t])Object(o.b)(r,n[t]);else{var i=e(t),a=r[0];u.test(t)?d(i,v(a)):i.on(a)}return n}));function d(e,t,r){r=r||t;var i=p(t);return e.on((function(){var t=!1;n.forget=function(){t=!0},Object(o.b)(arguments,i),delete n.forget,t&&e.un(r)}),r),n}function p(e){return function(){try{return e.apply(n,arguments)}catch(e){setTimeout((function(){throw new Error(e.message)}))}}}function v(e){return function(){var t=e.apply(this,arguments);Object(i.a)(t)&&(t===a.a.drop?s():l(t))}}function h(t,n,r){var o;o="node"===t?v(r):r,d(function(t,n){return e(t+":"+n)}(t,n),o,r)}function b(e,t,r){return Object(i.d)(t)?h(e,t,r):function(e,t){for(var n in t)h(e,n,t[n])}(e,t),n}return e(r.i).on((function(e){n.root=Object(o.f)(e)})),e(r.c).on((function(e,t){n.header=function(e){return e?t[e]:t}})),n={on:f,addListener:f,removeListener:function(t,r,o){if("done"===t)c.un(r);else if("node"===t||"path"===t)e.un(t+":"+r,o);else{var i=r;e(t).un(i)}return n},emit:e.emit,node:Object(o.j)(b,"node"),path:Object(o.j)(b,"path"),done:Object(o.j)(d,c),start:Object(o.j)((function(t,r){return e(t).on(p(r),r),n}),r.c),fail:e(r.b).on,abort:e(r.a).emit,header:o.i,root:o.i,source:t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(3);function o(e){var t,n,o,i,a=e(r.j).emit,u=e(r.l).emit,c=e(r.k).emit,s=e(r.b).emit,l=65536,f=/[\\"\n]/g,d=0,p=d++,v=d++,h=d++,b=d++,g=d++,m=d++,y=d++,w=d++,O=d++,j=d++,k=d++,P=d++,C=d++,E=d++,_=d++,A=d++,x=d++,S=d++,M=d++,T=d++,L=20,N=l,I="",D=!1,R=!1,q=p,K=[],B=null,U=0,z=0,Q=0,W=0,F=1;function H(e){void 0!==i&&(u(i),c(),i=void 0),t=Error(e+"\nLn: "+F+"\nCol: "+W+"\nChr: "+n),s(Object(r.o)(void 0,void 0,t))}function $(e){return"\r"===e||"\n"===e||" "===e||"\t"===e}e(r.m).on((function(e){if(!t){if(R)return H("Cannot write after close");var r,s=0;for(n=e[0];n&&(s>0&&(o=n),n=e[s++]);)switch(Q++,"\n"===n?(F++,W=0):W++,q){case p:if("{"===n)q=h;else if("["===n)q=g;else if(!$(n))return H("Non-whitespace before {[.");continue;case w:case h:if($(n))continue;if(q===w)K.push(O);else{if("}"===n){u({}),c(),q=K.pop()||v;continue}K.push(b)}if('"'!==n)return H('Malformed object key should start with " ');q=y;continue;case O:case b:if($(n))continue;if(":"===n)q===b?(K.push(b),void 0!==i&&(u({}),a(i),i=void 0),z++):void 0!==i&&(a(i),i=void 0),q=v;else if("}"===n)void 0!==i&&(u(i),c(),i=void 0),c(),z--,q=K.pop()||v;else{if(","!==n)return H("Bad object");q===b&&K.push(b),void 0!==i&&(u(i),c(),i=void 0),q=w}continue;case g:case v:if($(n))continue;if(q===g){if(u([]),z++,q=v,"]"===n){c(),z--,q=K.pop()||v;continue}K.push(m)}if('"'===n)q=y;else if("{"===n)q=h;else if("["===n)q=g;else if("t"===n)q=j;else if("f"===n)q=C;else if("n"===n)q=x;else if("-"===n)I+=n;else if("0"===n)I+=n,q=L;else{if(-1==="123456789".indexOf(n))return H("Bad value");I+=n,q=L}continue;case m:if(","===n)K.push(m),void 0!==i&&(u(i),c(),i=void 0),q=v;else{if("]"!==n){if($(n))continue;return H("Bad array")}void 0!==i&&(u(i),c(),i=void 0),c(),z--,q=K.pop()||v}continue;case y:void 0===i&&(i="");var d=s-1;e:for(;;){for(;U>0;)if(B+=n,n=e.charAt(s++),4===U?(i+=String.fromCharCode(parseInt(B,16)),U=0,d=s-1):U++,!n)break e;if('"'===n&&!D){q=K.pop()||v,i+=e.substring(d,s-1);break}if(!("\\"!==n||D||(D=!0,i+=e.substring(d,s-1),n=e.charAt(s++))))break;if(D){if(D=!1,"n"===n?i+="\n":"r"===n?i+="\r":"t"===n?i+="\t":"f"===n?i+="\f":"b"===n?i+="\b":"u"===n?(U=1,B=""):i+=n,n=e.charAt(s++),d=s-1,n)continue;break}f.lastIndex=s;var X=f.exec(e);if(!X){s=e.length+1,i+=e.substring(d,s-1);break}if(s=X.index+1,!(n=e.charAt(X.index))){i+=e.substring(d,s-1);break}}continue;case j:if(!n)continue;if("r"!==n)return H("Invalid true started with t"+n);q=k;continue;case k:if(!n)continue;if("u"!==n)return H("Invalid true started with tr"+n);q=P;continue;case P:if(!n)continue;if("e"!==n)return H("Invalid true started with tru"+n);u(!0),c(),q=K.pop()||v;continue;case C:if(!n)continue;if("a"!==n)return H("Invalid false started with f"+n);q=E;continue;case E:if(!n)continue;if("l"!==n)return H("Invalid false started with fa"+n);q=_;continue;case _:if(!n)continue;if("s"!==n)return H("Invalid false started with fal"+n);q=A;continue;case A:if(!n)continue;if("e"!==n)return H("Invalid false started with fals"+n);u(!1),c(),q=K.pop()||v;continue;case x:if(!n)continue;if("u"!==n)return H("Invalid null started with n"+n);q=S;continue;case S:if(!n)continue;if("l"!==n)return H("Invalid null started with nu"+n);q=M;continue;case M:if(!n)continue;if("l"!==n)return H("Invalid null started with nul"+n);u(null),c(),q=K.pop()||v;continue;case T:if("."!==n)return H("Leading zero not followed by .");I+=n,q=L;continue;case L:if(-1!=="0123456789".indexOf(n))I+=n;else if("."===n){if(-1!==I.indexOf("."))return H("Invalid number has two dots");I+=n}else if("e"===n||"E"===n){if(-1!==I.indexOf("e")||-1!==I.indexOf("E"))return H("Invalid number has two exponential");I+=n}else if("+"===n||"-"===n){if("e"!==o&&"E"!==o)return H("Invalid symbol in number");I+=n}else I&&(u(parseFloat(I)),c(),I=""),s--,q=K.pop()||v;continue;default:return H("Unknown state: "+q)}Q>=N&&(r=0,void 0!==i&&i.length>l&&(H("Max buffer length exceeded: textNode"),r=Math.max(r,i.length)),I.length>l&&(H("Max buffer length exceeded: numberNode"),r=Math.max(r,I.length)),N=l-r+Q)}})),e(r.n).on((function(){if(q===p)return u({}),c(),void(R=!0);q===v&&0===z||H("Unexpected end"),void 0!==i&&(u(i),c(),i=void 0),R=!0}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));var r=n(19),o=n(3),i=n(2),a=n(20),u=n(0);function c(){return new XMLHttpRequest}function s(e,t,n,c,s,l,f){var d=e(o.m).emit,p=e(o.b).emit,v=0,h=!0;function b(){if("2"===String(t.status)[0]){var e=t.responseText,n=(" "+e.substr(v)).substr(1);n&&d(n),v=Object(i.e)(e)}}function g(t){try{h&&e(o.c).emit(t.status,Object(a.a)(t.getAllResponseHeaders())),h=!1}catch(e){}}e(o.a).on((function(){t.onreadystatechange=null,t.abort()})),"onprogress"in t&&(t.onprogress=b),t.onreadystatechange=function(){switch(t.readyState){case 2:case 3:return g(t);case 4:g(t),"2"===String(t.status)[0]?(b(),e(o.n).emit()):p(Object(o.o)(t.status,t.responseText))}};try{for(var m in t.open(n,c,!0),l)t.setRequestHeader(m,l[m]);Object(r.a)(window.location,Object(r.b)(c))||t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.withCredentials=f,t.send(s)}catch(e){window.setTimeout(Object(u.j)(p,Object(o.o)(void 0,void 0,e)),0)}}},function(e,t,n){"use strict";function r(e,t){function n(t){return String(t.port||{"http:":80,"https:":443}[t.protocol||e.protocol])}return!!(t.protocol&&t.protocol!==e.protocol||t.host&&t.host!==e.host||t.host&&n(t)!==n(e))}function o(e){var t=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(e)||[];return{protocol:t[1]||"",host:t[2]||"",port:t[3]||""}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}))},function(e,t,n){"use strict";function r(e){var t={};return e&&e.split("\r\n").forEach((function(e){var n=e.indexOf(": ");t[e.substring(0,n)]=e.substring(n+2)})),t}n.d(t,"a",(function(){return r}))}]).default},"object"==typeof n&&"object"==typeof t?t.exports=o():"object"==typeof n?n.oboe=o():r.oboe=o()},{}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./vnode"),o=e("./is");function i(e,t,n){var i,a,u,c={};if(void 0!==n?(c=t,o.array(n)?i=n:o.primitive(n)?a=n:n&&n.sel&&(i=[n])):void 0!==t&&(o.array(t)?i=t:o.primitive(t)?a=t:t&&t.sel?i=[t]:c=t),void 0!==i)for(u=0;u<i.length;++u)o.primitive(i[u])&&(i[u]=r.vnode(void 0,void 0,void 0,i[u],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||function e(t,n,r){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==r&&void 0!==n)for(var o=0;o<n.length;++o){var i=n[o].data;void 0!==i&&e(i,n[o].children,n[o].sel)}}(c,i,e),r.vnode(e,c,i,a,void 0)}n.h=i,n.default=i},{"./is":22,"./vnode":29}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.htmlDomApi={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}},n.default=n.htmlDomApi},{}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.array=Array.isArray,n.primitive=function(e){return"string"==typeof e||"number"==typeof e}},{}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="http://www.w3.org/1999/xlink",o="http://www.w3.org/XML/1998/namespace",i=58,a=120;function u(e,t){var n,u=t.elm,c=e.data.attrs,s=t.data.attrs;if((c||s)&&c!==s){for(n in c=c||{},s=s||{}){var l=s[n];c[n]!==l&&(!0===l?u.setAttribute(n,""):!1===l?u.removeAttribute(n):n.charCodeAt(0)!==a?u.setAttribute(n,l):n.charCodeAt(3)===i?u.setAttributeNS(o,n,l):n.charCodeAt(5)===i?u.setAttributeNS(r,n,l):u.setAttribute(n,l))}for(n in c)n in s||u.removeAttribute(n)}}n.attributesModule={create:u,update:u},n.default=n.attributesModule},{}],24:[function(e,t,n){"use strict";function r(e,t){var n,r,o=t.elm,i=e.data.class,a=t.data.class;if((i||a)&&i!==a){for(r in a=a||{},i=i||{})a[r]||o.classList.remove(r);for(r in a)(n=a[r])!==i[r]&&o.classList[n?"add":"remove"](r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.classModule={create:r,update:r},n.default=n.classModule},{}],25:[function(e,t,n){"use strict";function r(e,t){var n=e.type,r=t.data.on;r&&r[n]&&function e(t,n,r){if("function"==typeof t)t.call(n,r,n);else if("object"==typeof t)if("function"==typeof t[0])if(2===t.length)t[0].call(n,t[1],r,n);else{var o=t.slice(1);o.push(r),o.push(n),t[0].apply(n,o)}else for(var i=0;i<t.length;i++)e(t[i],n,r)}(r[n],t,e)}function o(e,t){var n,o=e.data.on,i=e.listener,a=e.elm,u=t&&t.data.on,c=t&&t.elm;if(o!==u){if(o&&i)if(u)for(n in o)u[n]||a.removeEventListener(n,i,!1);else for(n in o)a.removeEventListener(n,i,!1);if(u){var s=t.listener=e.listener||function e(t){r(t,e.vnode)};if(s.vnode=t,o)for(n in u)o[n]||c.addEventListener(n,s,!1);else for(n in u)c.addEventListener(n,s,!1)}}}Object.defineProperty(n,"__esModule",{value:!0}),n.eventListenersModule={create:o,update:o,destroy:o},n.default=n.eventListenersModule},{}],26:[function(e,t,n){"use strict";function r(e,t){var n,r,o=t.elm,i=e.data.props,a=t.data.props;if((i||a)&&i!==a){for(n in a=a||{},i=i||{})a[n]||delete o[n];for(n in a)r=a[n],i[n]===r||"value"===n&&o[n]===r||(o[n]=r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.propsModule={create:r,update:r},n.default=n.propsModule},{}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./vnode"),o=e("./is"),i=e("./htmldomapi");function a(e){return void 0===e}function u(e){return void 0!==e}var c=r.default("",{},[],void 0,void 0);function s(e,t){return e.key===t.key&&e.sel===t.sel}function l(e,t,n){var r,o,i,a={};for(r=t;r<=n;++r)null!=(i=e[r])&&void 0!==(o=i.key)&&(a[o]=r);return a}var f=["create","update","remove","destroy","pre","post"],d=e("./h");n.h=d.h;var p=e("./thunk");n.thunk=p.thunk,n.init=function(e,t){var n,d,p={},v=void 0!==t?t:i.default;for(n=0;n<f.length;++n)for(p[f[n]]=[],d=0;d<e.length;++d){var h=e[d][f[n]];void 0!==h&&p[f[n]].push(h)}function b(e,t){return function(){if(0==--t){var n=v.parentNode(e);v.removeChild(n,e)}}}function g(e,t){var n,r=e.data;void 0!==r&&u(n=r.hook)&&u(n=n.init)&&(n(e),r=e.data);var i=e.children,s=e.sel;if("!"===s)a(e.text)&&(e.text=""),e.elm=v.createComment(e.text);else if(void 0!==s){var l=s.indexOf("#"),f=s.indexOf(".",l),d=l>0?l:s.length,h=f>0?f:s.length,b=-1!==l||-1!==f?s.slice(0,Math.min(d,h)):s,m=e.elm=u(r)&&u(n=r.ns)?v.createElementNS(n,b):v.createElement(b);for(d<h&&m.setAttribute("id",s.slice(d+1,h)),f>0&&m.setAttribute("class",s.slice(h+1).replace(/\./g," ")),n=0;n<p.create.length;++n)p.create[n](c,e);if(o.array(i))for(n=0;n<i.length;++n){var y=i[n];null!=y&&v.appendChild(m,g(y,t))}else o.primitive(e.text)&&v.appendChild(m,v.createTextNode(e.text));u(n=e.data.hook)&&(n.create&&n.create(c,e),n.insert&&t.push(e))}else e.elm=v.createTextNode(e.text);return e.elm}function m(e,t,n,r,o,i){for(;r<=o;++r){var a=n[r];null!=a&&v.insertBefore(e,g(a,i),t)}}function y(e){var t,n,r=e.data;if(void 0!==r){for(u(t=r.hook)&&u(t=t.destroy)&&t(e),t=0;t<p.destroy.length;++t)p.destroy[t](e);if(void 0!==e.children)for(n=0;n<e.children.length;++n)null!=(t=e.children[n])&&"string"!=typeof t&&y(t)}}function w(e,t,n,r){for(;n<=r;++n){var o=void 0,i=void 0,a=void 0,c=t[n];if(null!=c)if(u(c.sel)){for(y(c),i=p.remove.length+1,a=b(c.elm,i),o=0;o<p.remove.length;++o)p.remove[o](c,a);u(o=c.data)&&u(o=o.hook)&&u(o=o.remove)?o(c,a):a()}else v.removeChild(e,c.elm)}}function O(e,t,n){var r,o;u(r=t.data)&&u(o=r.hook)&&u(r=o.prepatch)&&r(e,t);var i=t.elm=e.elm,c=e.children,f=t.children;if(e!==t){if(void 0!==t.data){for(r=0;r<p.update.length;++r)p.update[r](e,t);u(r=t.data.hook)&&u(r=r.update)&&r(e,t)}a(t.text)?u(c)&&u(f)?c!==f&&function(e,t,n,r){for(var o,i,u,c=0,f=0,d=t.length-1,p=t[0],h=t[d],b=n.length-1,y=n[0],j=n[b];c<=d&&f<=b;)null==p?p=t[++c]:null==h?h=t[--d]:null==y?y=n[++f]:null==j?j=n[--b]:s(p,y)?(O(p,y,r),p=t[++c],y=n[++f]):s(h,j)?(O(h,j,r),h=t[--d],j=n[--b]):s(p,j)?(O(p,j,r),v.insertBefore(e,p.elm,v.nextSibling(h.elm)),p=t[++c],j=n[--b]):s(h,y)?(O(h,y,r),v.insertBefore(e,h.elm,p.elm),h=t[--d],y=n[++f]):(void 0===o&&(o=l(t,c,d)),a(i=o[y.key])?(v.insertBefore(e,g(y,r),p.elm),y=n[++f]):((u=t[i]).sel!==y.sel?v.insertBefore(e,g(y,r),p.elm):(O(u,y,r),t[i]=void 0,v.insertBefore(e,u.elm,p.elm)),y=n[++f]));(c<=d||f<=b)&&(c>d?m(e,null==n[b+1]?null:n[b+1].elm,n,f,b,r):w(e,t,c,d))}(i,c,f,n):u(f)?(u(e.text)&&v.setTextContent(i,""),m(i,null,f,0,f.length-1,n)):u(c)?w(i,c,0,c.length-1):u(e.text)&&v.setTextContent(i,""):e.text!==t.text&&(u(c)&&w(i,c,0,c.length-1),v.setTextContent(i,t.text)),u(o)&&u(r=o.postpatch)&&r(e,t)}}return function(e,t){var n,o,i,a=[];for(n=0;n<p.pre.length;++n)p.pre[n]();for(function(e){return void 0!==e.sel}(e)||(e=function(e){var t=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"";return r.default(v.tagName(e).toLowerCase()+t+n,{},[],void 0,e)}(e)),s(e,t)?O(e,t,a):(o=e.elm,i=v.parentNode(o),g(t,a),null!==i&&(v.insertBefore(i,t.elm,v.nextSibling(o)),w(i,[e],0,0))),n=0;n<a.length;++n)a[n].data.hook.insert(a[n]);for(n=0;n<p.post.length;++n)p.post[n]();return t}}},{"./h":20,"./htmldomapi":21,"./is":22,"./thunk":28,"./vnode":29}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./h");function o(e,t){t.elm=e.elm,e.data.fn=t.data.fn,e.data.args=t.data.args,t.data=e.data,t.children=e.children,t.text=e.text,t.elm=e.elm}function i(e){var t=e.data;o(t.fn.apply(void 0,t.args),e)}function a(e,t){var n,r=e.data,i=t.data,a=r.args,u=i.args;if(r.fn===i.fn&&a.length===u.length){for(n=0;n<u.length;++n)if(a[n]!==u[n])return void o(i.fn.apply(void 0,u),t);o(e,t)}else o(i.fn.apply(void 0,u),t)}n.thunk=function(e,t,n,o){return void 0===o&&(o=n,n=t,t=void 0),r.h(e,{key:t,hook:{init:i,prepatch:a},fn:n,args:o})},n.default=n.thunk},{"./h":20}],29:[function(e,t,n){"use strict";function r(e,t,n,r,o){return{sel:e,data:t,children:n,text:r,elm:o,key:void 0===t?void 0:t.key}}Object.defineProperty(n,"__esModule",{value:!0}),n.vnode=r,n.default=r},{}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("chess.js"),o=e("./puzzle"),i=function(){function e(e){this.gameAnalysis=e}return e.prototype.puzzles=function(e){var t=this,n=new r.Chess,i=[];this.gameAnalysis.moves.split(" ").forEach((function(e){i.push(n.fen()),n.move(e)})),n.history({verbose:!0}).forEach((function(e,n){if(t.gameAnalysis.analysis[n]&&t.gameAnalysis.analysis[n].judgment){var r=t.gameAnalysis.analysis[n].best;t.gameAnalysis.analysis[n].move=e,t.gameAnalysis.analysis[n].halfMove=n+1,t.gameAnalysis.analysis[n].fen=i[n],t.gameAnalysis.analysis[n].best={from:r.substring(0,2),to:r.substring(2,4)},t.gameAnalysis.analysis[n].speed=t.gameAnalysis.speed,t.gameAnalysis.analysis[n].id=t.gameAnalysis.id}}));var a=this.gameAnalysis.players.white.user,u=a&&a.id==e?"w":"b";return this.gameAnalysis.analysis=this.gameAnalysis.analysis.filter((function(e){return e.judgment})).filter((function(e){return e.move.color==u})).map((function(e){return new o.Puzzle(e)}))},e}();n.Analysis=i},{"./puzzle":35,"chess.js":1}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("snabbdom"),o=e("snabbdom/modules/class"),i=e("snabbdom/modules/attributes"),a=e("snabbdom/modules/props"),u=e("snabbdom/modules/eventlisteners"),c=function(){function e(e){this.patch=r.init([o.default,a.default,i.default,u.default]),this.puzzles=[],this.element=e}return e.prototype.setPuzzles=function(e){this.puzzles=e,this.redraw()},e.prototype.redraw=function(){this.vnode=this.patch(this.vnode||this.element,this.render(this.puzzles))},e.prototype.render=function(e){return r.h("div#chessground-examples",e.map((function(e){return e.render()})))},e}();n.Boards=c},{snabbdom:27,"snabbdom/modules/attributes":23,"snabbdom/modules/class":24,"snabbdom/modules/eventlisteners":25,"snabbdom/modules/props":26}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("chess.js"),o=e("./util");n.colour=function(e){return function(t){var n=new r.Chess(t.analysis.fen);return""===e||o.toColor(n)===e}},n.severity=function(e){return function(t){return""===e||t.analysis.judgment.name===e}},n.phase=function e(t){return function(n){return""===t||("Opening"==t?n.analysis.halfMove<20:"Endgame"===t?n.analysis.fen.replace(/ .*$/,"").replace(/[0-9 pP-]/g,"").length<=13:!e("Opening")(n)&&!e("Endgame")(n))}},n.timecontrol=function(e){return function(t){return""===e||t.analysis.speed===e}}},{"./util":36,"chess.js":1}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("oboe"),o=function(){function e(e){this.url=e}return e.prototype.games=function(e,t,n,o){var i=[];r({method:"GET",url:this.url+"/games/export/"+e+"?max="+t+"&perfType=ultraBullet,bullet,blitz,rapid,classical&analysed=true&evals=true&moves=true&opening=true",headers:{Accept:"application/x-ndjson"}}).node("!",(function(e){i.push(e),n(e)})).on("end",(function(e){o(i)})).fail((function(e){console.error(JSON.stringify(e))}))},e}();n.LichessApi=o},{oboe:19}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./lichessApi");n.LichessApi=r.LichessApi;var o=e("./boards");n.Boards=o.Boards;var i=e("./analysis");n.Analysis=i.Analysis;var a=e("./filters");n.colour=a.colour,n.severity=a.severity,n.phase=a.phase,n.timecontrol=a.timecontrol},{"./analysis":30,"./boards":31,"./filters":32,"./lichessApi":33}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("chess.js"),o=e("chessground"),i=e("./util"),a=e("snabbdom"),u=function(){function e(e){var t=this;this.runUnit=function(e){var n=e.elm;n.className="cg-board-wrap",t.run(n)},this.analysis=e,this.chess=new r.Chess(this.analysis.fen),this.config=this.initialiseConfig(),this.status=""}return e.prototype.initialiseConfig=function(){var e=i.toColor(this.chess);return{orientation:e,turnColor:e,fen:this.analysis.fen,movable:{color:e,free:!1,dests:i.toDests(this.chess)}}},e.prototype.pathFromStatus=function(e){return""==this.status?e:e+"."+this.status},e.prototype.render=function(){return a.h(this.pathFromStatus("section.blue.merida"),[a.h("div.cg-board-wrap",{hook:{insert:this.runUnit,postpatch:this.runUnit}}),a.h("p",a.h("a",{props:{href:this.url(this.analysis),target:"_blank"}},this.analysis.judgment.name))])},e.prototype.url=function(e){var t=new r.Chess(e.fen),n=i.toColor(t);return"https://lichess.org/"+e.id+"/"+n+"#"+(e.halfMove-1)},e.prototype.run=function(e){var t=this,n=o.Chessground(e,this.config);return this.originalMove(n),n.set({movable:{events:{after:function(e,r){t.moveAndResult(n,e,r)}}},events:{select:function(e){t.originalMove(n)}}}),n},e.prototype.originalMove=function(e){e.set({drawable:{shapes:[this.arrow(this.analysis.move,"red")]}})},e.prototype.moveAndResult=function(e,t,n){this.chess.move({from:t,to:n}),e.set({turnColor:i.toColor(this.chess),movable:{color:i.toColor(this.chess),dests:i.toDests(this.chess)},drawable:{shapes:[{orig:t,dest:n,brush:"yellow"},this.arrow(this.analysis.move,"red"),this.arrow(this.analysis.best,"green")]}})},e.prototype.arrow=function(e,t){return{orig:e.from,dest:e.to,brush:t}},e}();n.Puzzle=u},{"./util":36,"chess.js":1,chessground:5,snabbdom:27}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.toDests=function(e){var t={};return e.SQUARES.forEach((function(n){var r=e.moves({square:n,verbose:!0});r.length&&(t[n]=r.map((function(e){return e.to})))})),t},n.toColor=function(e){return"w"===e.turn()?"white":"black"}},{}]},{},[34])(34)}));